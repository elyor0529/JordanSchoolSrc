<mat-card>
  <mat-card-content>

    <div fxLayoutAlign="center">
      <table>
        <tr>
          <td>
            <h2> {{currentYear}} </h2>
          </td>
          <td>
            <h2>{{schoolName}}</h2>
          </td>
        </tr>
      </table>
    </div>
  </mat-card-content>
</mat-card>

<mat-toolbar color="basic" fxLayout="row" fxLayoutAlign="space-between center" class="px-2 user-toolbar">
  <div fxLayout="row">
    <!-- <a mat-raised-button color="accent" [routerLink]="['../add']"> -->
    <a mat-raised-button color="accent" (click)="addNewPayment()">
      <mat-icon>add_circle_outline</mat-icon> Add
    </a>
  </div>
</mat-toolbar>
{{xx}}
<mat-divider></mat-divider>
<mat-card>
  <mat-card-content>
    <mat-form-field fxFlex="20%" class="mat-select" appearance="outline">
      <mat-label>إختر ولي الامر</mat-label> 
      <mat-select placeholder=" ولي الامر" [(value)]="selected" (selectionChange)="onParentChanged($event.value)">
        <mat-option>
          <ngx-mat-select-search placeholder=" ولي الامر">
          </ngx-mat-select-search>
        </mat-option>
        <mat-option *ngFor="let op of parentList" [value]="op.id">
          {{ op.fatherName }}
        </mat-option>

      </mat-select>
    </mat-form-field>

    <!-- 
    <mat-form-field appearance="outline">
      <mat-label>السنة</mat-label>
      <mat-select matInput placeholder="السنة" (selectionChange)="onYearChanged($event.value)">
        <mat-option *ngFor="let op of yearsList" [value]="op.id">
          {{op.id}} | {{op.aName}}
        </mat-option>
      </mat-select>
    </mat-form-field> -->

    <div fxLayout fxLayoutAlign="center center">
      <mat-form-field fxFlex="40%">
       
      </mat-form-field>
    </div>


  </mat-card-content>

</mat-card>



<div fxLayout="column" class="p-2">
  <div class="p-2">

    <div class="spinner-container" *ngIf="loading">
      <mat-spinner></mat-spinner>
    </div>

    <!-- 
    <div fxLayout="column" class="p-2">
      <div fxLayout fxLayout.xs="column" fxLayoutGap="50px">
        <div fxLayout fxLayoutAlign="center center">
         
        </div>
      </div>
    </div> -->

    <!-- 
    //=========================================================
    //=========================================================
    <div fxLayout="column" class="p-2">
      <div class="p-2">
        <mat-label>
          <h2>
            دفعات ولي الأمر
          </h2>
        </mat-label>

        <mat-table #table [dataSource]="paymentsDataSource" class="mat-elevation-z8">
          <ng-container *ngFor="let col of paymentcols" [matColumnDef]="col.field">
            <mat-header-cell *matHeaderCellDef>
              {{ col.header }}
            </mat-header-cell>
            <mat-cell *matCellDef="let item">

              {{ item[col.field] }}

            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="actions">
            <mat-header-cell *matHeaderCellDef>
              Actions
            </mat-header-cell>
            <mat-cell *matCellDef="let element">

              <a mat-icon-button matTooltip="تعديل" (click)="updatePayment(element.id) ">
                <mat-icon aria-hidden="true" aria-label="Files">
                  edit
                </mat-icon>
              </a>

              <button mat-icon-button color="warn" matTooltip="حذف" (click)="openDeleteDialog(element)">
                <mat-icon aria-hidden="true" aria-label="Delete">
                  delete
                </mat-icon>
              </button>
              <button mat-icon-button color="info" matTooltip="تفاصيل"
                [routerLink]="['/sections/view/' + element.id  ]">
                <mat-icon aria-hidden="false" aria-label="info">
                  info
                </mat-icon>
              </button>
            </mat-cell>
          </ng-container>

          <mat-header-row *matHeaderRowDef="paymentDisplayedColumns"></mat-header-row>
          <mat-row *matRowDef="let row; columns: paymentDisplayedColumns;">
          </mat-row>
        </mat-table>

      </div>
    </div>

  //=========================================================
  //========================================================= -->

    <div fxLayout="column" class="p-2">
      <div class="p-2">
        <mat-label>
          <h2>
            مالية الطالب
          </h2>
        </mat-label>
        <div class="spinner-container" *ngIf="loading">
          <mat-spinner></mat-spinner>
        </div>

        <mat-table #table [dataSource]="studentFeesDataSource" class="mat-elevation-z8">
          <ng-container *ngFor="let col of studentFeesCols" [matColumnDef]="col.field">
            <mat-header-cell *matHeaderCellDef>
              {{ col.header }}
            </mat-header-cell>
            <mat-cell *matCellDef="let item">
              {{ item[col.field] }}
            </mat-cell>
          </ng-container>
          -----
          <ng-container matColumnDef="actions">
            <mat-header-cell *matHeaderCellDef>
              التفاصيل
            </mat-header-cell>
            <mat-cell *matCellDef="let element">
              <button mat-icon-button color="info" matTooltip="تفاصيل البنود المالية"
                (click)="GetStudFeesDtl(element.studentId,element.studentName)">
                <mat-icon aria-hidden="false" aria-label="info">
                  info
                </mat-icon>
              </button>
            </mat-cell>
          </ng-container>
          <mat-header-row *matHeaderRowDef="studentFeesDisplayedColumns"></mat-header-row>
          <mat-row *matRowDef="let row; columns: studentFeesDisplayedColumns;">
          </mat-row>
        </mat-table>
      </div>
    </div>




    <div fxLayout="column" class="p-2">
      <div class="p-2">
        <mat-card>
          <mat-card-content>
            <mat-label>
              <h2>
                تفاصيل البنود المالية  
              </h2>
            </mat-label>
            <mat-label style="color: red">
              <h3>
                إسم الطالب:
                {{studName}}
              </h3>
            </mat-label>

            <mat-table #table [dataSource]="studentFeesDtlDataSource" class="mat-elevation-z8">
              <ng-container *ngFor="let col of studentFeesDtlCols" [matColumnDef]="col.field">
                <mat-header-cell *matHeaderCellDef>
                  {{ col.header }}
                </mat-header-cell>
                <mat-cell *matCellDef="let item">

                  {{ item[col.field] }}

                </mat-cell>
              </ng-container>

              <mat-header-row *matHeaderRowDef="studentFeesDtlDisplayedColumns"></mat-header-row>
              <mat-row *matRowDef="let row; columns: studentFeesDtlDisplayedColumns;">
              </mat-row>
            </mat-table>
          </mat-card-content>
        </mat-card>
      </div>
    </div>

  </div>
</div>