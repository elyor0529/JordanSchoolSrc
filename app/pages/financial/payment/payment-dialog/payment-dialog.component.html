
<form [formGroup]="PaymentformGroup" (ngSubmit)="submit()" novalidate="novalidate">
   
   <mat-dialog-content>
     

            <mat-card>
      <div class="form">
         <table>
            <tr>
               <td>
                  <h2> تسديد الاقساط </h2>
               </td>
               <td>
                  <h3>
                  اسم ولي الأمر: 
                  {{this.service.sParentName}}</h3>
               </td> 
            </tr>
         </table>
      </div>
      <div class="form">
                  <mat-form-field fxFlex class="mat-select" appearance="outline">
                     <mat-label> الطالب </mat-label>
                     <mat-select matInput  formControlName="studentId" [(ngModel)]="studId" placeholder="الطالب" required
                     (selectionChange)="onStudChange()">
                        <mat-option *ngFor="let op of childrenList" [value]="op.id">
                           {{ op.firstName }}
                        </mat-option>
                     </mat-select>
                  </mat-form-field> 
                  <mat-form-field fxFlex appearance="outline">
                        <mat-label> القسم </mat-label>
                        <input matInput  formControlName="sectionId" readonly [(ngModel)]="sectionName" type="text" placeholder="  القسم">
                  </mat-form-field>  
                  <mat-form-field fxFlex appearance="outline">
                     <mat-label> الصف </mat-label>
                     <input matInput  formControlName="sectionId2" readonly [(ngModel)]="className" type="text" placeholder="  الصف">
               </mat-form-field>  
               <mat-form-field fxFlex appearance="outline">
                  <mat-label> الشعبة </mat-label>
                  <input matInput  formControlName="sectionId3" readonly [(ngModel)]="classSeqName" type="text" placeholder="  الشعبة">
            </mat-form-field>  
      </div>
               
      


      <div  class="form">   
           
                  <div>   
        
<mat-form-field fxFlex="100%" color="accent" appearance="outline">
      <mat-label> البيــــــان  </mat-label>
      <input matInput formControlName="note" type="text" placeholder="  البيان    ">
   </mat-form-field>
</div>
<div>
    
      <mat-form-field fxFlex class="mat-select" appearance="outline"  >
            <mat-label>  نوع القبض </mat-label>
            <mat-select matInput formControlName="finItemId" placeholder="   نوع القبض  "   required>
               <mat-option *ngFor="let op of finItemList; let i = index" [value]="op.id" >
                  {{ op.arDesc }}
               </mat-option>
            </mat-select>
          </mat-form-field>
          
          <mat-form-field fxFlex color="accent" appearance="outline"  >
             <mat-label> المبلغ  </mat-label>
             <input matInput formControlName="credit" type="text" placeholder="  المبلغ    ">
          </mat-form-field>


      <mat-form-field fxFlex color="accent" appearance="outline">
            <mat-label> طريقة القبض </mat-label>
            <mat-select matInput formControlName="paymentMethodId" placeholder="   طريقة القبض" required
               [(ngModel)]="optionValue">
               <mat-option *ngFor="let op of PaymentMethodList" [value]="op.id">
                  {{op.id}} | {{op.aname}}
               </mat-option>
            </mat-select>
         </mat-form-field>
         <mat-form-field fxFlex color="accent" appearance="outline">
            <mat-label> التاريخ</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="voucherDate" readonly>
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
         </mat-form-field>
</div>

</div>

            <div>
         <div>
            <ng-container *ngIf="optionValue == '1203'">
               <mat-card>
                  <mat-form-field fxFlex color="accent" appearance="outline">
                     <mat-label> رقم الحوالة </mat-label>
                     <input matInput formControlName="transferNo" type="text" placeholder="  رقم الحوالة     ">
                  </mat-form-field>

                  <mat-form-field fxFlex color="accent" appearance="outline">
                     <mat-label> تاريخ الحوالة </mat-label>
                     <input matInput [matDatepicker]="picker1" formControlName="transferDate"
                        placeholder="  تاريخ الحوالة     ">
                     <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                     <mat-datepicker #picker1></mat-datepicker>
                  </mat-form-field>

               </mat-card>
            </ng-container>

            <ng-container *ngIf="optionValue == '1202'">
               <mat-card>
                  <mat-form-field fxFlex color="accent" appearance="outline">
                     <mat-label> رقم البطاقة </mat-label>
                     <input matInput formControlName="visaCardNo" type="text" placeholder="  رقم البطاقة     ">
                  </mat-form-field>

               </mat-card>
            </ng-container>
         </div>


      </div>
   </mat-card>
   
  
         <div>
            <ng-container *ngIf="optionValue == '1201'">
               <mat-card>
                 <app-payment-form></app-payment-form>
               </mat-card>
            </ng-container>
         </div>
   </mat-dialog-content>



   <mat-dialog-actions>
      <button mat-raised-button tabindex="-1" color="warn" (click)="closeDialog()">
         عودة
      </button>
      <button [type]="submit" mat-raised-button color="primary" (click)="submitPayment()">
         تخزين
      </button>

      <button mat-raised-button tabindex="-1" color="warn" (click)="payCheck()">
         شيكات
      </button>

   </mat-dialog-actions>
</form>

