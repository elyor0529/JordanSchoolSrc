
<app-content-header 
[icon]="'store_mall_directory'" 
[title]="'   المستخدمين'" 
[hideBreadcrumb]="false"
[hasBgImage]="true" 
[class]="'pb-4'">
</app-content-header>
  


<mat-toolbar color="basic" fxLayout="row" fxLayoutAlign="space-between center" class="px-2 user-toolbar">
  <div fxLayout="row">
    <a mat-raised-button color="accent" [routerLink]="['../add']">
      <mat-icon>add_circle_outline</mat-icon> إضافة مستخدم جديد
    </a>
   
  </div>

</mat-toolbar>

<mat-card>
    <mat-card-content>
  
  <div class="example-container mat-elevation-z8">
      <table mat-table [dataSource]="dataSource">
           

     
      
        <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef> # </th>
            <td mat-cell *matCellDef="let transaction"> {{transaction.id}} </td>
            <td mat-footer-cell *matFooterCellDef>  </td>
          </ng-container>
       
          <ng-container matColumnDef="username">
              <th mat-header-cell *matHeaderCellDef> إسم المستخدم </th>
              <td mat-cell *matCellDef="let transaction"> {{transaction.username}} </td>
              <td mat-footer-cell *matFooterCellDef>  </td>
            </ng-container>
            
        <ng-container matColumnDef="password">
            <th mat-header-cell *matHeaderCellDef> كلمة المرور </th>
            <td mat-cell *matCellDef="let transaction"> {{transaction.password}} </td>
            <td mat-footer-cell *matFooterCellDef>  </td>
          </ng-container>

          <ng-container matColumnDef="usersSchool.schoolId">
              <th mat-header-cell *matHeaderCellDef> المدرسة</th>
              <td mat-cell *matCellDef="let transaction"> {{transaction.schoolName}} </td>
              <td mat-footer-cell *matFooterCellDef>  </td>
            </ng-container>
            <ng-container matColumnDef="roleName">
                <th mat-header-cell *matHeaderCellDef> الصلاحيات</th>
                <td mat-cell *matCellDef="let transaction"> {{transaction.roleName}} </td>
                <td mat-footer-cell *matFooterCellDef>  </td>
              </ng-container>
      <ng-container matColumnDef="actions">

        <mat-header-cell *matHeaderCellDef>
          العمليات
        </mat-header-cell>
        <mat-cell *matCellDef="let element">

          
            <button mat-icon-button [matMenuTriggerFor]="menu">
                <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
                <a mat-menu-item appHideIfUnauthorized="UpdateUserRoles" [routerLink]="['/users/edit/'+ element.id ]">
                    <mat-icon aria-hidden="true" aria-label="Roles">
                       edit
                    </mat-icon>
                    <span>
                       تعديل
                    </span>
                </a>

                <button  mat-menu-item appHideIfUnauthorized="DeleteUser" color="warn" (click)="openDeleteDialog(element)">
                    <mat-icon aria-hidden="true" aria-label="Delete">
                        delete
                    </mat-icon>
                    <span color="warn">
                       حذف مستخدم
                    </span>
                </button>
                <a mat-menu-item appHideIfUnauthorized="UpdateUserRoles" [routerLink]="['/users/editSchool/'+ element.id ]">
                  <mat-icon aria-hidden="true" aria-label="Roles">
                     edit
                  </mat-icon>
                  <span>
                     تغيير مدرسة
                  </span>
              </a>
              <a mat-menu-item appHideIfUnauthorized="UpdateUserRoles" [routerLink]="['/users/editRole/'+ element.id ]">
                <mat-icon aria-hidden="true" aria-label="Roles">
                   menu
                </mat-icon>
                <span>
                    الصلاحيات
                </span>
            </a>
                </mat-menu>

                
               

         
          <a mat-icon-button matTooltip="تعديل" [routerLink]="['/users/edit/' + element.id  ]">
            <mat-icon aria-hidden="true" aria-label="Files">
              edit
            </mat-icon>  
          </a> 
          <button mat-icon-button color="warn" matTooltip="حذف" (click)="openDeleteDialog(element)">
              <mat-icon aria-hidden="true" aria-label="Delete">
                delete
              </mat-icon>
            </button>
         
        </mat-cell>
      </ng-container>
 
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      
    </table>
    </div>
    </mat-card-content>
</mat-card>